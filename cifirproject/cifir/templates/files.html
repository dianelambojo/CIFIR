{% extends "base.html" %} {% load static %} {% block content %}<br />
{% if user.is_authenticated %}
<div class="container-fluid">
  <div class="card">
    {% for collection_name in collection_names %}
    <div class="card-header">
      <i class="fas fa-book-reader"></i> {{collection_name.name}} 
      <div class="navbar-text" id="navbarNavRight">
        <a class="buttons">
          <i
            class="fas fa-plus-square"
            data-toggle="modal"
            data-target="#addBookModal"
          ></i>
        </a>
        <a class="buttons">
          <i class="fas fa-minus-circle" data-toggle="modal" data-target="#deleteCollectionModal-{{collection_name.id}}"></i>
        </a>
        <a class="buttons">
          <i
            class="fas fa-edit"
            data-toggle="modal"
            data-target="#editCollectionModal-{{collection_name.id}}"
          ></i>
        </a>
      </div>
    </div>
    <div class="card-body">
      <!--{% for book in books %}
      < !-- <div class="i-folders">
        <i class="fas fa-book"></i>
      </div>
      <h6>{{ book.title }}</h6> -->
      {% include './components/TheBook.html' %}
    </div>
    <!-- {% endfor %} -->
  </div>
</div>
<!-- Modal add-->
<div
  class="modal fade"
  id="addBookModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="addBookModal"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addBookModal">Add book to Collection</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form class="" method="POST" enctype="multipart/form-data">
          {% csrf_token %}

          <div>
            <label for="book_file">File Upload</label>
            <input type="file" name="book_file" id="id_book_file" required="" />
          </div>

          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Close
            </button>
            <button type="submit" class="btn btn-primary" name="btnUpload">
              Upload
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Modal edit-->
<div
  class="modal fade"
  id="editCollectionModal-{{collection_name.id}}"
  tabindex="-1"
  role="dialog"
  aria-labelledby="editCollectionModal"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editCollectionModal-{{collection_name.id}}">Rename collection</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form class="" method="POST" enctype="multipart/form-data">
          {% csrf_token %}

          <div class="txt_field">
            <div class="i-folders">
              <i class="fas fa-folder"> </i>

              <input
                class="form-control form-control-sm"
                type="text"
                placeholder="Rename Collection"
                name="name"
                maxlength="150"
                required=""
                id="id_collection_name"

              />
              <input
                class="form-control form-control-sm"
                type="text"
                placeholder="Rename Collection"
                name="id"
                maxlength="150"
                required=""
                id="id_collection_id"
                value = "{{collection_name.id}}"
                hidden
              />
            </div>
          </div>

          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Close
            </button>
            <button type="submit" class="btn btn-primary" name="editCollectionBtn">
              Save
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Modal delete-->
<div
  class="modal fade"
  id="deleteCollectionModal-{{collection_name.id}}"
  tabindex="-1"
  role="dialog"
  aria-labelledby="deleteCollectionModal"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteCollectionModal-{{collection_name.id}}">Delete collection</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form class="" method="POST" enctype="multipart/form-data">
          {% csrf_token %}

          <div class="txt_field">
              <input
                class="form-control form-control-sm"
                type="text"
                name="id"
                maxlength="150"
                required=""
                id="id_collection_id"
                value = "{{collection_name.id}}"
                hidden
              />
            </div>
          
Are you sure you want to delete this record?
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              No
            </button>
            <button type="submit" class="btn btn-primary" name="deleteCollectionBtn">
              Yes
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

{% endfor %} 
{% endif %} 
{% endblock content %}
